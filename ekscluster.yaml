---
apiVersion: eksctl.io/v1alpha5
kind: ClusterConfig

metadata:
  name: airflow-on-kubernetes
  region: eu-west-3

availabilityZones: ["eu-west-3a", "eu-west-3b", "eu-west-3c"]

managedNodeGroups:
- name: ng-on-demand
  desiredCapacity: 2
  minSize: 2
  maxSize: 4
  labels:
    lifecycle: OnDemand
  # iam:
  #   withAddonPolicies:
  #     autoScaler: true
  # ssh:
  #     allow: true 
 
- name: ng-spot1
  desiredCapacity: 2
  minSize: 1
  maxSize: 4
  instanceTypes: ["c5a.large","c5a.xlarge","c5.2xlarge"]
  spot: true
  labels:
    lifecycle: Ec2Spot
